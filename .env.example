# ============================================
# miniWiki Environment Configuration
# ============================================
# Copy this file to .env and fill in the values
# Never commit .env to version control!

# ============================================
# Database Configuration
# ============================================
POSTGRES_USER=miniwiki
POSTGRES_PASSWORD=change_this_secure_password_in_production
POSTGRES_DB=miniwiki
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
DATABASE_URL=postgres://miniwiki:change_this_secure_password_in_production@localhost:5432/miniwiki

# ============================================
# Redis Configuration
# ============================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_URL=redis://localhost:6379

# ============================================
# MinIO / S3 Configuration
# ============================================
MINIO_ENDPOINT=localhost:9000
MINIO_ROOT_USER=miniwiki_admin
MINIO_ROOT_PASSWORD=change_this_secure_password_in_production
MINIO_BUCKET=miniwiki-files
MINIO_REGION=us-east-1
MINIO_USE_SSL=false

# ============================================
# JWT Authentication
# ============================================
# IMPORTANT: Generate a secure secret for production!
JWT_SECRET=your-super-secret-jwt-key-minimum-256-bits-long
JWT_ACCESS_EXPIRY=15m
JWT_REFRESH_EXPIRY=7d
JWT_ISSUER=miniwiki
JWT_AUDIENCE=miniwiki-users

# ============================================
# Security Configuration
# ============================================
BCRYPT_COST=12
PASSWORD_MIN_LENGTH=8
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_LOWERCASE=true
PASSWORD_REQUIRE_NUMBER=true
PASSWORD_REQUIRE_SPECIAL=true

# Rate limiting
RATE_LIMIT_ANONYMOUS=100/hour
RATE_LIMIT_AUTHENTICATED=1000/hour

# Session configuration
SESSION_EXPIRY=24h
MAX_CONCURRENT_SESSIONS=5

# ============================================
# Email Configuration (for password reset)
# ============================================
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_USER=noreply@miniwiki.local
SMTP_PASSWORD=your_smtp_password
SMTP_FROM=noreply@miniwiki.local
SMTP_USE_TLS=true
EMAIL_RESET_LINK_EXPIRY=1h

# ============================================
# Application Configuration
# ============================================
APP_NAME=miniWiki
APP_URL=http://localhost:3000
APP_ENV=development
APP_DEBUG=true

# API Configuration
API_BASE_URL=http://localhost:8080/api/v1
API_VERSION=v1
API_CORS_ORIGINS=http://localhost:3000,http://localhost:8080

# WebSocket Configuration
WS_URL=ws://localhost:8080/ws

# ============================================
# File Upload Configuration
# ============================================
MAX_DOCUMENT_SIZE=10485760  # 10MB in bytes
MAX_FILE_SIZE=52428800      # 50MB in bytes
ALLOWED_FILE_TYPES=image/*,application/pdf,text/*,video/*,audio/*
FILE_UPLOAD_PATH=./uploads

# ============================================
# Logging Configuration
# ============================================
RUST_LOG=info
LOG_FORMAT=json
LOG_LEVEL=info

# ============================================
# Encryption Configuration
# ============================================
ENCRYPTION_KEY=your-32-byte-encryption-key-here
ENCRYPTION_ALGORITHM=AES-256-GCM

# ============================================
# Frontend Configuration (Flutter)
# ============================================
# These are used by the Flutter app
FLUTTER_APP_API_BASE_URL=http://localhost:8080/api/v1
FLUTTER_APP_WS_URL=ws://localhost:8080/ws
FLUTTER_APP_APP_NAME=miniWiki
FLUTTER_APP_VERSION=0.1.0

# ============================================
# Docker Configuration
# ============================================
# These are used in docker-compose.yml
POSTGRES_PORT=5432
REDIS_PORT=6379
MINIO_API_PORT=9000
MINIO_CONSOLE_PORT=9001
BACKEND_PORT=8080
WEB_PORT=3000
NGINX_PORT=80
NGINX_SSL_PORT=443

# ============================================
# Development/Testing Configuration
# ============================================
TEST_DATABASE_URL=postgres://miniwiki:test123@localhost:5432/miniwiki_test
TEST_REDIS_URL=redis://localhost:6379/1
SEED_ADMIN_EMAIL=admin@miniwiki.local
SEED_ADMIN_PASSWORD=admin123
